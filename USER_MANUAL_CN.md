# Backend101 使用手册 (后端初学者指南)

## 📖 引言

欢迎使用 Backend101！🎉

Backend101 是一个专门为后端开发初学者设计的 React 工具，旨在帮助你测试自己实现的 ToDo (待办事项) API。如果你正在学习后端开发，并通过构建一个 ToDo 应用来练习，那么这个工具将是你的得力助手。

本手册将引导你了解：
-   你需要实现什么样的后端 API。
-   如何使用 Backend101 工具来测试你的 API。
-   如何根据测试结果判断你的 API 实现是否正确。

## 🎯 你需要做什么？

作为一名后端开发者，你需要实现一个遵循 RESTful 规范的 ToDo API。这个 API 需要支持对代办事项的创建 (Create)、读取 (Read)、更新 (Update) 和删除 (Delete) 操作，通常称为 CRUD 操作。

具体来说，Backend101 工具将主要测试以下核心功能：

1.  **获取所有待办事项列表**
2.  **获取单个待办事项的详情**
3.  **创建新的待办事项**

你的后端服务需要能够处理 HTTP 请求，并以 JSON 格式返回响应。

### API 端点要求

根据 Backend101 的测试逻辑，你的 API 至少需要实现以下端点：

| HTTP 方法 | 路径             | 描述                                     | 成功状态码 | 响应体格式 (示例)                                                                 |
| :-------- | :--------------- | :--------------------------------------- | :--------- | :-------------------------------------------------------------------------------- |
| `GET`     | `/todos`         | 获取所有待办事项                         | `200`      | `[{"id": 1, "title": "学习", "completed": false}, {"id": 2, "title": "写代码", "completed": true}]` |
| `GET`     | `/todos/{id}`    | 通过 ID 获取单个待办事项 (例如 `/todos/1`) | `200`      | `{"id": 1, "title": "学习", "completed": false}`                                     |
| `GET`     | `/todos/{id}`    | 获取一个不存在的待办事项 (例如 `/todos/99999`) | `404`      | (通常为空或错误信息)                                                              |
| `POST`    | `/todos`         | 创建一个新的待办事项                     | `201`      | `{"id": 3, "title": "新任务", "completed": false}` (应包含新生成的 `id`)             |

**重要字段说明：**

每个待办事项对象应至少包含以下字段：
-   `id`: 数字 (Number) 类型，唯一标识符。
-   `title`: 字符串 (String) 类型，待办事项的标题。
-   `completed`: 布尔 (Boolean) 类型，表示待办事项是否已完成。

## 🚀 如何使用 Backend101 测试你的 API

1.  **启动你的后端服务**：
    确保你的 ToDo API 服务已经在本地或其他可访问的地址成功运行。例如，如果你的后端服务运行在 `http://localhost:8000`。

2.  **运行 Backend101 前端工具**：
    如果 Backend101 项目尚未运行，请根据项目 `README.md` 中的指示启动它：
    ```bash
    # 进入 Backend101 项目目录
    # cd path/to/backend101

    # 安装依赖 (如果尚未安装)
    # npm install
    # 或 pnpm install
    # 或 yarn install

    # 启动开发服务器
    npm run dev
    # 或 pnpm dev
    # 或 yarn dev
    ```
    通常，Backend101 会在 `http://localhost:5173` 启动。

3.  **配置后端 URL**：
    打开浏览器，访问 Backend101 应用。在页面上找到 "Backend Base URL" 输入框，填入你的后端服务地址 (例如 `http://localhost:8000`)。

    ![输入后端URL](https://raw.githubusercontent.com/suyiiyii/backend101/main/image/README/1747554443158.png)
    *(请注意：上图中的示例URL可能与你的实际URL不同)*

4.  **开始测试**：
    点击 "Start All Tests" 按钮。Backend101 将会按照预设的顺序，逐个调用你的 API 端点并进行验证。

## ✅ 如何判断你的实现是否正确

Backend101 会针对一系列预定义的测试用例来检验你的 API。测试完成后，你会看到每个测试用例的结果。

### 理解测试结果界面

-   **测试卡片**：每个 API 端点的测试会显示为一个卡片。
-   **状态图标**：
    -   ✔ (绿色勾)：表示该项测试通过。
    -   ✖ (红色叉)：表示该项测试失败。
    -   ⏳ (蓝色沙漏)：表示该项测试正在运行。
    -   ⚪ (灰色圆圈)：表示该项测试尚未开始。
-   **展开详情**：点击任意测试卡片，可以展开查看更详细的测试信息，包括：
    -   请求的 URL 和方法
    -   预期的状态码 (Expected Status) 和实际收到的状态码 (Actual Status)
    -   预期的响应内容类型 (Expected Content Type) 和实际的响应内容类型 (Actual Content Type)
    -   实际的响应体 (Response Body)
    -   如果测试失败，会显示失败原因 (Reason)。

### "故障检测" 特性

Backend101 具有 "故障检测" 功能。这意味着测试会**在第一个失败的测试用例处停止**。这样做是为了帮助你快速定位到第一个问题，并优先解决它，因为后续的测试可能依赖于前面测试的正确性。

### 各项测试的详细判断标准

以下是 Backend101 中每个测试用例的具体检查点：

1.  **`GET /todos`**
    -   **目的**：获取所有待办事项列表。
    -   **预期行为**：
        -   HTTP 状态码应为 `200 OK`。
        -   响应头 `Content-Type` 应为 `application/json`。
        -   响应体应为一个 JSON 数组。即使没有待办事项，也应返回一个空数组 `[]`。

2.  **`GET /todos/{id}` (测试存在的 ID, 例如 `/todos/1`)**
    -   **目的**：获取指定 ID 的待办事项。
    -   **前提**：你的后端需要预先准备一个 ID 为 `1` 的待办事项，或者能够动态处理此请求。
    -   **预期行为**：
        -   HTTP 状态码应为 `200 OK`。
        -   响应头 `Content-Type` 应为 `application/json`。
        -   响应体应为一个 JSON 对象，包含 `id` (值为 `1`), `title` (字符串), 和 `completed` (布尔值) 字段。

3.  **`GET /todos/{id}` (测试不存在的 ID, 例如 `/todos/99999`)**
    -   **目的**：测试当请求一个不存在的资源时的处理。
    -   **预期行为**：
        -   HTTP 状态码应为 `404 Not Found`。

4.  **`POST /todos`**
    -   **目的**：创建一个新的待办事项。
    -   **测试过程**：
        -   Backend101 会发送一个请求体，例如：`{"title": "Test Todo", "completed": false}`。
    -   **预期行为**：
        -   HTTP 状态码应为 `201 Created`。
        -   响应头 `Content-Type` 应为 `application/json`。
        -   响应体应为一个 JSON 对象，代表新创建的待办事项。此对象必须包含一个由服务器生成的唯一 `id` (数字类型)，并且 `title` 和 `completed` 字段应与请求发送的一致。

5.  **`POST /todos, then GET and Validate` (顺序测试)**
    -   **目的**：这是一个两步测试，验证数据创建后的持久性和一致性。
    -   **测试过程**：
        1.  **第一步 (POST)**：Backend101 会发送一个 POST 请求来创建一个新的待办事项 (例如，`{"title": "Validate Me Todo", "completed": true}`)。
            -   **预期行为 (POST)**：同上面的 `POST /todos` 测试。服务器应返回 `201 Created` 和包含新 `id` 的待办事项对象。
        2.  **第二步 (GET)**：Backend101 会立即使用从上一步 POST 响应中获取到的 `id`，向 `/todos/{id}` 发送一个 GET 请求。
            -   **预期行为 (GET)**：
                -   HTTP 状态码应为 `200 OK`。
                -   响应体中的待办事项数据 (id, title, completed) 必须与第一步 POST 请求时发送的数据以及 POST 响应中返回的数据完全一致。
    -   **通过标准**：此测试只有当 POST 和后续的 GET 验证都成功时才算通过。

**如果所有测试都显示为绿色勾 (✔)，那么恭喜你，你的 API 基础功能已经基本符合要求！**

## 💡 常见问题与提示

-   **Q: 我的后端 URL 应该是什么？**
    A: 这取决于你的后端服务监听的地址和端口。如果是本地开发，通常是 `http://localhost:<端口号>` 或 `http://127.0.0.1:<端口号>`。例如，`sample-backend` 默认运行在 `http://localhost:8000`。

-   **Q: 为什么测试在第一个错误就停止了？**
    A: 这是为了帮助你聚焦。通常，API 的不同操作之间可能存在依赖。修复了第一个错误后，后续的测试才更有意义。

-   **Q: 我应该如何调试我的后端？**
    A: 当 Backend101 报告错误时，仔细查看失败原因和实际响应体。同时，检查你的后端服务的控制台日志，那里通常会有更详细的错误信息或请求记录。使用 Postman、curl 或其他 API 测试工具单独测试失败的端点也是一个好方法。

-   **Q: `GET /todos/1` 这个测试要求我的数据库里必须有 ID 为 1 的数据吗？**
    A: 是的，为了通过 `GET /todos/{id} (existent)` 这个测试，你的后端在处理 `/todos/1` 请求时需要能返回一个有效的待办事项数据。你可以：
    *   在后端启动时初始化一些种子数据。
    *   如果你的 API 支持，先通过 `POST /todos` 创建一个 ID 为 1 的事项 (但这可能不符合此测试的独立性)。
    *   最简单的方式是确保你的数据库或数据存储中至少有一个 ID 为 1 的条目。`sample-backend` 示例中通常会包含一些初始数据。

-   **Q: 我可以参考示例后端吗？**
    A: 当然！项目中包含一个 `sample-backend` 目录，里面有一个使用 Python FastAPI 实现的、能够通过所有测试的后端示例。你可以参考它的代码来理解 API 的预期行为。

## 🎉 总结

Backend101 工具旨在简化你测试 ToDo API 的过程。通过理解其测试逻辑和判断标准，你可以更有效地开发和调试你的后端应用。祝你编码愉快，早日成为后端大师！
